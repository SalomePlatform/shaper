## Copyright (C) 2014-20xx CEA/DEN, EDF R&D


SET(CMAKE_AUTOMOC ON)

SET(PROJECT_HEADERS
	SHAPER_SHAPERGUI.h
	SHAPERGUI.h
	SHAPERGUI_DataModel.h
	SHAPERGUI_OCCSelector.h
	SHAPERGUI_SalomeViewer.h
	SHAPERGUI_NestedButton.h
)

SET(PROJECT_AUTOMOC
    ${CMAKE_CURRENT_BINARY_DIR}/SHAPERGUI_automoc.cpp
)

SET(PROJECT_SOURCES
	SHAPERGUI.cpp
	SHAPERGUI_DataModel.cpp
	SHAPERGUI_OCCSelector.cpp
	SHAPERGUI_SalomeViewer.cpp
	SHAPERGUI_NestedButton.cpp
)

SET(PROJECT_RESOURCES
	${CMAKE_CURRENT_BINARY_DIR}/LightApp.xml
	${CMAKE_CURRENT_BINARY_DIR}/SalomeApp.xml
	resources/shaper.png
)

SET(PROJECT_LIBRARIES
    Events
    Config
	XGUI
	ModuleBase
	${QT_LIBRARIES}
	${suit}
	${std}
	${LightApp}
	${CAM}
	${OCCViewer}
	${qtx}
	${CAS_SHAPE}
)

ADD_DEFINITIONS( -DSHAPERGUI_EXPORTS ${CAS_DEFINITIONS} )

INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR}/src/XGUI
					${PROJECT_SOURCE_DIR}/src/Events
					${PROJECT_SOURCE_DIR}/src/ModuleBase
                    ${PROJECT_SOURCE_DIR}/src/ModelAPI
                    ${PROJECT_SOURCE_DIR}/src/GeomAPI
                    ${PROJECT_SOURCE_DIR}/src/Config
					${SALOME_GUI_INCLUDE}
					${SALOME_KERNEL_INCLUDE}
                    ${CAS_INCLUDE_DIRS}
)

ADD_LIBRARY(SHAPER SHARED
	${PROJECT_SOURCES}
	${PROJECT_HEADERS}
)

ADD_DEPENDENCIES(SHAPER XGUI)

# The Qt5Widgets_LIBRARIES variable also includes QtGui and QtCore
TARGET_LINK_LIBRARIES(SHAPER ${PROJECT_LIBRARIES})

# configuration
CONFIGURE_FILE(
  "${CMAKE_CURRENT_SOURCE_DIR}/resources/LightApp.xml.in"
  "${CMAKE_CURRENT_BINARY_DIR}/LightApp.xml"
  )
CONFIGURE_FILE(
  "${CMAKE_CURRENT_SOURCE_DIR}/resources/SalomeApp.xml.in"
  "${CMAKE_CURRENT_BINARY_DIR}/SalomeApp.xml"
  )

INSTALL(TARGETS SHAPER DESTINATION ${SHAPER_INSTALL_BIN})
INSTALL(FILES ${PROJECT_RESOURCES} DESTINATION ${SHAPER_INSTALL_RESOURCES})
